<!--pages/index/index.wxml-->
<view class="page">
  <scroll-view class='tab-h' scroll-x style='width: 100%;'>
    <view class="tab-item {{currentTab==0?'active':''}}">我参加的</view>
    <view class="tab-item {{currentTab==1?'active':''}}">我创建的</view>
  </scroll-view>
  <swiper class="tab-content" current="{{currentTab}}" duration="300" bindchange="switchTab" style="height: {{contentHeight}}px">
    <swiper-item class="tab-content-item">
      <scroll-view scroll-y style="height:100%;">
        <view>
          <view wx:if="{{queueList.length === 0}}" class="no-result">没有参加任何活动</view>
          <view wx:else class="activity-list">
            <view class="activity-card" wx:for="{{queueList}}" wx:key="{{index}}" data-id='{{item.id}}' bindtap="gotoDetail">
              <view class="activity-title">{{item.id}}</view>
              <view class="activity-time">
                <view></view>
                <view></view>
              </view>
              <view class="activity-content">
                {{item.description}}
              </view>
              <view class="bottom-bar">
                <view></view>
                <button class="share-btn" open-type="share" data-id="{{item.id}}" data-title="{{item.title}}"></button>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </swiper-item>
    <swiper-item class="tab-content-item">
      <scroll-view scroll-y style="height:100%;">
        <view class="my-queue">
          <view wx:if="{{activityList.length === 0}}" class="no-result">还没有一个活动</view>
          <view wx:else class="activity-list">
            <view class="activity-card" wx:for="{{activityList}}" wx:key="{{index}}" data-id='{{item.activityId}}' bindtap="gotoDetail">
              <view class="activity-title">{{item.title}}</view>
              <view class="activity-time">
                <view>{{item.startTime}}</view>
                <view></view>
              </view>
              <view class="activity-content">
                {{item.description}}
              </view>
              <view class="bottom-bar">
                <view class="">报名{{item.parts.length}}{{item.unit || '人'}}</view>
                <button class="share-btn" open-type="share" data-id="{{item.id}}" data-title="{{item.title}}"></button>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </swiper-item>
  </swiper>
  <view wx:if="{{hasAuth}}" class="create-btn" bindtap="gotoCreate">创建一个活动</view>
  <button wx:else open-type="getUserInfo" class="create-btn" bindgetuserinfo="handleGetUserInfo">创建一个活动</button>
</view>
